load_QC <- load_QC %>%
select(-c(load_QC$'Moyenne (MW)')) %>% arrange(time)
load_QC <- load_QC %>%
rename(time = Date) %>%
mutate(load_mw = load_QC$'Moyenne (MW)')
load_QC <- load_QC %>%
select(-c(load_QC$'Moyenne (MW)')) %>% arrange(time)
# Import and merge all CSV files into one data frame
load_QC <- list.files() %>%
lapply(read_excel) %>%
bind_rows
load_QC <- load_QC %>%
rename(time = Date) %>%
mutate(load_mw = load_QC$'Moyenne (MW)') %>%
arrange(time)
load_QC <- load_QC %>%
select(-c(load_QC$'Moyenne (MW)'))
load_QC <- load_QC[,-c('Moyenne (MW)')]
load_QC <- load_QC[,c(time, load_mw)]
load_QC <- load_QC[,c("time", "load_mw")]
# Import and merge all CSV files into one data frame
load_QC <- list.files() %>%
lapply(read_excel) %>%
bind_rows
load_QC <- load_QC %>%
rename(time = Date) %>%
mutate(load_mw = load_QC$'Moyenne (MW)') %>%
arrange(time)
load_QC <- load_QC[,c("time", "load_mw")]
load_QC <- load_QC[,c("time","load_mw")]
View(load_QC)
setwd("../fuel_mix")
# Import and merge all CSV files into one data frame
fuelmix_ON <- list.files() %>%
lapply(read_csv, show_col_types = FALSE) %>%
bind_rows
View(load_QC)
test <- load_QC$time-1
test <- load_QC$time-59
test <- load_QC$time-60
test <- load_QC$time-1
test <- load_QC$time-600
test <- load_QC$time-3600
setwd("..")
setwd("load")
# Import and merge all CSV files into one data frame
load_QC <- list.files() %>%
lapply(read_excel) %>%
bind_rows
load_QC <- load_QC %>%
mutate(time = Date -3600) %>%
mutate(load_mw = load_QC$'Moyenne (MW)') %>%
arrange(time)
load_QC <- load_QC[,c("time","load_mw")]
setwd("../fuel_mix")
# Import and merge all CSV files into one data frame
fuelmix_QC <- list.files() %>%
lapply(read_excel) %>%
bind_rows
fuelmix_QC <- fuelmix_QC %>%
mutate(time = Date -1800) %>%
arrange(time) %>% select(-Date)
View(fuelmix_QC)
View(fuelmix_QC)
HydroCQ <- inner_join(load_QC, fuelmix_QC, by = "time")
View(HydroCQ)
HydroQC <- inner_join(load_QC, fuelmix_QC, by = "time")
duplicated(load_QC)
max(duplicated(load_QC))
HydroQC <- inner_join(load_QC, fuelmix_QC, by = "time") %>% arrange(time)
View(HydroQC)
max(duplicated(load_QC$time))
fuelmix_QC$IsRepeated <- as.integer(duplicated(fuelmix_QC) | duplicated(fuelmix_QC, fromLast = FALSE))
View(fuelmix_QC)
fuelmix_QC$IsRepeated <- as.integer(duplicated(fuelmix_QC$time) | duplicated(fuelmix_QC$time, fromLast = FALSE))
View(HydroQC)
View(fuelmix_QC)
load_QC$IsRepeated <- as.integer(duplicated(load_QC$time) | duplicated(load_QC$time, fromLast = FALSE))
View(load_QC)
load_QC[7346,]
fuelmix_QC[7344,]
HydroQC <- inner_join(load_QC[7346,], fuelmix_QC, by = "time") %>% arrange(time)
View(HydroQC)
HydroQC <- inner_join(load_QC, fuelmix_QC[7344,], by = "time") %>% arrange(time)
View(HydroQC)
HydroQC2 <- inner_join(load_QC[7346,], fuelmix_QC, by = "time") %>% arrange(time)
View(HydroQC2)
fuelmix_QC[7344,]
View(load_QC)
# Identify duplicated rows
duplicated_rows <- duplicated(load_QC) | duplicated(load_QC, fromLast = TRUE)
# Get the duplicated rows
duplicated_entries <- df[duplicated_rows, ]
# Get the duplicated rows
duplicated_entries <- load_QC[duplicated_rows, ]
View(duplicated_entries)
# Identify duplicated rows
duplicated_rows <- duplicated(load_QC$time) | duplicated(load_QC$time, fromLast = TRUE)
View(duplicated_entries)
# Get the duplicated rows
duplicated_entries <- load_QC[duplicated_rows, ]
View(duplicated_entries)
setwd("../")
rm(list = ls())
library(dplyr)
library(readxl)
library(tidyverse)
library(stringr)
setwd("load")
# Import and merge all CSV files into one data frame
load_QC <- list.files() %>%
lapply(read_excel) %>%
bind_rows
# Identify duplicated rows
duplicated_rows <- duplicated(load_QC$Date) | duplicated(load_QC$Date, fromLast = TRUE)
# Get the duplicated rows
duplicated_entries <- load_QC[duplicated_rows, ]
View(duplicated_entries)
# Import and merge all CSV files into one data frame
load_QC <- list.files() %>%
lapply(read_excel) %>%
bind_rows
load_QC <- load_QC %>%
mutate(time = Date -3600) %>%
mutate(load_mw = load_QC$'Moyenne (MW)') %>%
arrange(time)
# Identify duplicated rows
duplicated_rows <- duplicated(load_QC$Date) | duplicated(load_QC$Date, fromLast = TRUE)
# Get the duplicated rows
duplicated_entries <- load_QC[duplicated_rows, ]
View(duplicated_entries)
# Import and merge all CSV files into one data frame
load_QC <- list.files() %>%
lapply(read_excel) %>%
bind_rows
rm(list = ls())
library(dplyr)
library(readxl)
library(tidyverse)
library(stringr)
# Import and merge all CSV files into one data frame
load_QC <- list.files() %>%
lapply(read_excel) %>%
bind_rows
load_QC <- load_QC %>%
mutate(time = Date -3600) %>%
mutate(load_mw = load_QC$'Moyenne (MW)') %>%
arrange(time)
load_QC <- load_QC[,c("time","load_mw")]
# Need to take care of day-time saving
load_QC <- load_QC %>%
aggregate(load_mw ~ time, FUN = mean)
# Import and merge all CSV files into one data frame
load_QC <- list.files() %>%
lapply(read_excel) %>%
bind_rows
# Identify duplicated rows
df <- load_QC$time
load_QC <- load_QC %>%
mutate(time = Date -3600) %>%
mutate(load_mw = load_QC$'Moyenne (MW)') %>%
arrange(time)
load_QC <- load_QC[,c("time","load_mw")]
# Identify duplicated rows
df <- load_QC$time
duplicated_rows <- duplicated(df) | duplicated(df, fromLast = TRUE)
duplicated_entries <- load_QC[duplicated_rows, ]
View(duplicated_entries)
# Need to take care of day-time saving
load_QC2 <- load_QC %>%
aggregate(load_mw ~ time, FUN = mean)
View(load_QC2)
differing_rows <- anti_join(load_QC, load_QC2, by = "time")
View(differing_rows)
differing_rows <- anti_join(load_QC, load_QC2)
View(differing_rows)
View(load_QC)
View(load_QC2)
rm(list = ls())
library(dplyr)
library(readxl)
library(tidyverse)
library(stringr)
setwd("load")
# Import and merge all CSV files into one data frame
load_QC <- list.files() %>%
lapply(read_excel) %>%
bind_rows
load_QC <- load_QC %>%
mutate(time = Date -3600) %>%
mutate(load_mw = load_QC$'Moyenne (MW)') %>%
arrange(time)
load_QC <- load_QC[,c("time","load_mw")]
# Need to take care of day-time saving
# Note that some hourly observations are missing on 2019-06-21
load_QC <- load_QC %>%
aggregate(load_mw ~ time, FUN = mean)
setwd("../fuel_mix")
# Import and merge all CSV files into one data frame
fuelmix_QC <- list.files() %>%
lapply(read_excel) %>%
bind_rows
fuelmix_QC <- fuelmix_QC %>%
mutate(time = Date -1800) %>%
arrange(time) %>% select(-Date)
names(fuelmix_QC[,-time])
names(fuelmix_QC[,-c(time)])
names(fuelmix_QC[[,-c(time)]])
names(fuelmix_QC)[names(fuelmix_QC)!="time"]
# Need to take care of day-time saving
fuelmix_QC2 <- fuelmix_QC %>%
aggregate(names(fuelmix_QC)[names(fuelmix_QC)!="time"] ~ time, FUN = mean) %>%
HydroQC <- inner_join(load_QC, fuelmix_QC, by = "time") %>% arrange(time)
paste(names(fuelmix_QC)[names(fuelmix_QC),sep="+")
paste(names(fuelmix_QC)[names(fuelmix_QC)!="time",sep="+")
names(fuelmix_QC)[names(fuelmix_QC)!="time"
paste(names(fuelmix_QC)[names(fuelmix_QC)!="time"],sep="+")
test <- paste(names(fuelmix_QC)[names(fuelmix_QC)!="time"],sep="+")
test <- paste0(names(fuelmix_QC)[names(fuelmix_QC)!="time"],sep="+")
test <- paste(names(fuelmix_QC)[names(fuelmix_QC)!="time"],collapse = "+")
# Need to take care of day-time saving
fuelmix_QC2 <- fuelmix_QC %>%
aggregate(paste(names(fuelmix_QC)[names(fuelmix_QC)!="time"], collapse="+") ~ time, FUN = mean) %>%
HydroQC <- inner_join(load_QC, fuelmix_QC, by = "time") %>% arrange(time)
# Need to take care of day-time saving
fuelmix_QC2 <- fuelmix_QC %>%
aggregate(Hydraulique ~ time,
FUN = mean)
# Need to take care of day-time saving
fuelmix_QC2 <- fuelmix_QC %>%
aggregate(Hydraulique + Eolien ~ time,
FUN = mean)
View(fuelmix_QC2)
# Need to take care of day-time saving
fuelmix_QC2 <- fuelmix_QC %>%
aggregate( ~ time,
FUN = mean)
# Need to take care of day-time saving
fuelmix_QC2 <- fuelmix_QC %>%
aggregate( . ~ time,
FUN = mean)
# Need to take care of day-time saving
fuelmix_QC <- fuelmix_QC %>%
aggregate( . ~ time, FUN = mean)
HydroQC <- inner_join(load_QC, fuelmix_QC, by = "time") %>% arrange(time)
# Save the dataframe as an RData file
save(load_QC, file = "../load_HydroQC.RData")
save(fuelmix_QC, file = "../fuelmix_HydroQC.RData")
save(HydroQC, file = "../HydroQC.RData")
View(HydroQC)
setwd("../")
rm(list = ls())
library(here)
here::here()
rm(list = ls())
library(dplyr)
library(readxl)
library(stringr)
library(here)
here()
here::here()
setwd("load")
# Import and merge all CSV files into one data frame
load_QC <- list.files() %>%
lapply(read_excel) %>%
bind_rows
load_QC <- load_QC %>%
mutate(time = Date -3600) %>%
mutate(load_mw = load_QC$'Moyenne (MW)') %>%
arrange(time)
load_QC <- load_QC[,c("time","load_mw")]
# Identify duplicated rows
df <- load_QC$time
duplicated_rows <- duplicated(df) | duplicated(df, fromLast = TRUE)
duplicated_entries <- load_QC[duplicated_rows, ]
# Need to take care of day-time saving
# Note that some hourly observations are missing on 2019-06-21
load_QC <- load_QC %>%
aggregate(load_mw ~ time, FUN = mean)
here::here()
setwd("fuel_mix")
getwd()
here::here()
here()
setwd(here())
setwd(here())
setwd("load")
rm(list = ls())
library(dplyr)
library(readxl)
library(stringr)
library(here)
setwd(here())
setwd("load")
# Import and merge all CSV files into one data frame
load_QC <- list.files() %>%
lapply(read_excel) %>%
bind_rows
load_QC <- load_QC %>%
mutate(time = Date -3600) %>%
mutate(load_mw = load_QC$'Moyenne (MW)') %>%
arrange(time)
load_QC <- load_QC[,c("time","load_mw")]
# Need to take care of day-time saving
# Note that some hourly observations are missing on 2019-06-21
load_QC <- load_QC %>%
aggregate(load_mw ~ time, FUN = mean)
setwd(here())
setwd("fuel_mix")
# Import and merge all CSV files into one data frame
fuelmix_QC <- list.files() %>%
lapply(read_excel) %>%
bind_rows
# Need to take care of day-time saving
fuelmix_QC2 <- fuelmix_QC %>%
aggregate( . ~ time, FUN = mean)
fuelmix_QC <- fuelmix_QC %>%
mutate(time = Date -1800) %>%
arrange(time) %>% select(-Date)
# Need to take care of day-time saving
fuelmix_QC2 <- fuelmix_QC %>%
aggregate( . ~ time, FUN = mean)
differing_rows <- anti_join(fuelmix_QC, fuelmix_QC2, by = "time")
View(differing_rows)
differing_rows <- anti_join(fuelmix_QC, fuelmix_QC2)
View(differing_rows)
# Need to take care of day-time saving
fuelmix_QC <- fuelmix_QC %>%
aggregate( . ~ time, FUN = mean)
HydroQC <- inner_join(load_QC, fuelmix_QC, by = "time") %>% arrange(time)
differing_rows <- anti_join(fuelmix_QC, HydroQC_QC[,-c(2)])
test <- HydroQC[,-c(2)]
test <- HydroQC[,-2]
differing_rows <- anti_join(fuelmix_QC, HydroQC[,-c(2)])
View(differing_rows)
differing_rows <- anti_join(load_QC, HydroQC[,-c(3:)])
differing_rows <- anti_join(load_QC, HydroQC[,-c(3::)])
differing_rows <- anti_join(load_QC, HydroQC[,-c(3:ncol(HydroQC))])
View(differing_rows)
View(HydroQC)
source("C:/Users/atyho/Dropbox/eletricity_data/QC/QC_data_process.R")
source("C:/Users/atyho/Dropbox/eletricity_data/QC/QC_data_process.R")
source("C:/Users/atyho/Dropbox/eletricity_data/PJM/PJM_data_process.R")
# Import and merge all CSV files into one data frame
load_PJM <- list.files() %>%
lapply(read_csv, show_col_types = FALSE) %>%
bind_rows
getwd()
here()
source("C:/Users/atyho/Dropbox/eletricity_data/PJM/PJM_data_process.R")
rm(list = ls())
library(dplyr)
library(readr)
library(tidyr)
library(here)
here(0)
here()
here()
setwd("../")
library(here)
setwd(here())
here()
setwd("load")
# Import and merge all CSV files into one data frame
load_PJM <- list.files() %>%
lapply(read_csv, show_col_types = FALSE) %>%
bind_rows
# Only keep data for regional transmission organization (RTO)
load_PJM <- load_PJM %>% filter(nerc_region == "RTO")
setwd("../PJM")
setwd("PJM")
getwd(0)
getwd()
setwd("../../PJM")
setwd("load")
# Import and merge all CSV files into one data frame
load_PJM <- list.files() %>%
lapply(read_csv, show_col_types = FALSE) %>%
bind_rows
# Only keep data for regional transmission organization (RTO)
load_PJM <- load_PJM %>% filter(nerc_region == "RTO")
load_PJM <- load_PJM %>%
mutate(time = as.POSIXct(datetime_beginning_ept,
format="%m/%d/%Y %I:%M:%S %p", tz="US/Eastern")) %>%
select(time, mw) %>% rename(load_mw = mw) %>%
arrange(time)
setwd("../fuel_mix")
setwd("fuel_mix")
# Import and merge all CSV files into one data frame
fuelmix_PJM <- list.files() %>%
lapply(read_csv, show_col_types = FALSE) %>%
bind_rows
fuelmix_PJM <- fuelmix_PJM %>%
mutate(time = as.POSIXct(fuelmix_PJM$datetime_beginning_ept,
format="%m/%d/%Y %I:%M:%S %p", tz="Canada/Eastern")) %>%
select(time, fuel_type, mw) %>% arrange(fuel_type, time)
# Need to take care of day-time saving
fuelmix_PJM <- fuelmix_PJM %>%
aggregate(mw ~ time + fuel_type, FUN = mean) %>%
pivot_wider(names_from = fuel_type, values_from = mw)
PJM <- inner_join(load_PJM, fuelmix_PJM, by = "time")
# Save the dataframe as an RData file
save(load_PJM, file = "../load_PJM.RData")
save(fuelmix_PJM, file = "../fuelmix_PJM.RData")
save(PJM, file = "../PJM.RData")
load("C:/Users/atyho/Dropbox/eletricity_data/NY/NYISO.RData")
getwd()
setwd("../../ON")
getwd()
rm(list = ls())
library(dplyr)
library(readr)
library(stringr)
library(here)
setwd("demand")
# Import and merge all CSV files into one data frame
load_ON <- list.files() %>%
lapply(read_csv, show_col_types = FALSE) %>%
bind_rows
load_ON <- na.omit(load_ON)
names(load_ON) <- c("date","hour","demand_mkt","demand_ON")
load_ON <- load_ON %>%
mutate(time = as.POSIXct(paste(date,hour-1),
format="%Y-%m-%d %H", tz="Canada/Eastern")) %>%
arrange(time) %>% select(-date, -hour)
setwd(here())
setwd("../fuel_mix")
setwd("../../ON")
getwd()
setwd("../ON")
setwd("fuel_mix")
# Import and merge all CSV files into one data frame
fuelmix_ON <- list.files() %>%
lapply(read_csv, show_col_types = FALSE) %>%
bind_rows
fuelmix_ON <- fuelmix_ON %>%
mutate(time = as.POSIXct(paste(Date,Hour-1),
format="%m/%d/%Y %H", tz="Canada/Eastern")) %>%
arrange(time) %>% select(-Date, -Hour)
IESO <- inner_join(load_ON, fuelmix_ON, by = "time")
load_ON[,52579]
load_ON[52579,]
View(load_ON)
View(load_ON)
fuelmix_ON[43820,]
View(fuelmix_ON)
# Import and merge all CSV files into one data frame
load_ON <- list.files() %>%
lapply(read_csv, show_col_types = FALSE) %>%
bind_rows
View(load_ON)
View(load_ON)
load_ON <- na.omit(load_ON)
# Import and merge all CSV files into one data frame
load_ON <- list.files() %>%
lapply(read_csv, show_col_types = FALSE) %>%
bind_rows
load_ON <- na.omit(load_ON)
names(load_ON) <- c("date","hour","demand_mkt","demand_ON")
setwd("demand")
setwd("../demand")
# Import and merge all CSV files into one data frame
load_ON <- list.files() %>%
lapply(read_csv, show_col_types = FALSE) %>%
bind_rows
View(load_ON)
load_ON <- na.omit(load_ON)
names(load_ON) <- c("date","hour","demand_mkt","demand_ON")
load_ON <- load_ON %>%
mutate(time = as.POSIXct(paste(date,hour-1),
format="%Y-%m-%d %H", tz="Canada/Eastern")) %>%
arrange(time) %>% select(-date, -hour)
View(load_ON)
# Import and merge all CSV files into one data frame
load_ON <- list.files() %>%
lapply(read_csv, show_col_types = FALSE) %>%
bind_rows
load_ON <- na.omit(load_ON)
names(load_ON) <- c("date","hour","demand_mkt","demand_ON")
load_ON <- load_ON %>%
mutate(time = as.POSIXct(paste(date,hour-1),
format="%Y-%m-%d %H", tz="Canada/Eastern")) %>%
arrange(time)
View(load_ON)
# Import and merge all CSV files into one data frame
load_ON <- list.files() %>%
lapply(read_csv, show_col_types = FALSE) %>%
bind_rows
load_ON <- na.omit(load_ON)
names(load_ON) <- c("date","hour","demand_mkt","demand_ON")
load_ON <- load_ON %>%
mutate(time = as.POSIXct(paste(date,hour-1), format="%Y-%m-%d %H")) %>%
arrange(time)
load_ON <- na.omit(load_ON)
setwd("fuel_mix")
setwd("../fuel_mix")
# Import and merge all CSV files into one data frame
fuelmix_ON <- list.files() %>%
lapply(read_csv, show_col_types = FALSE) %>%
bind_rows
fuelmix_ON <- fuelmix_ON %>%
mutate(time = as.POSIXct(paste(Date,Hour-1),
format="%m/%d/%Y %H", tz="Canada/Eastern")) %>%
arrange(time) %>% select(-Date, -Hour)
fuelmix_ON <- na.omit(fuelmix_ON)
IESO <- inner_join(load_ON, fuelmix_ON, by = "time")
IESO <- inner_join(load_ON, fuelmix_ON, by = "time")
# Save the dataframe as an RData file
save(load_ON, file = "../load_IESO.RData")
save(fuelmix_ON, file = "../fuelmix_IESO.RData")
save(IESO, file = "../IESO.RData")
save(IESO, file = "../IESO.RData")
