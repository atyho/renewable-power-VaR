load("C:/Users/atyho/Dropbox/eletricity_data/NE/ISONE.RData")
duplicates_x <- ISONE %>%
group_by(time_utc) %>%
filter(n() > 1) %>%
ungroup()
library(readr)
library(tidyr)
library(lubridate)
library(here)
duplicates_x <- ISONE %>%
group_by(time_utc) %>%
filter(n() > 1) %>%
ungroup()
library(dplyr)
library(readr)
library(tidyr)
library(lubridate)
library(here)
duplicates_x <- ISONE %>%
group_by(time_utc) %>%
filter(n() > 1) %>%
ungroup()
head(duplicates_x)
View(duplicates_x)
rm(list = ls())
library(dplyr)
library(readr)
library(tidyr)
library(lubridate)
library(here)
#### Electricity Demand ####
setwd(paste0(here(), "/load"))
# Import and merge all CSV files into one data frame
load_NE <- list.files(pattern = "\\.csv$", full.names = TRUE) %>%
lapply(read_csv, show_col_types = FALSE, skip = 5) %>%
bind_rows %>% select(-H)
# Rename columns
names(load_NE) <- c("date","hour","load_NE")
View(load_NE)
# Create datetime column
load_NE <- load_NE %>%
# Identify the dates that have a "02X" entry, indicating the DST switch date
group_by(date) %>% mutate(dst_end = any(hour == "02X")) %>% ungroup() %>%
# Covert time to UTC
mutate(
time = as.POSIXct(paste(date, hour), format = "%m/%d/%Y %H", tz = "America/New_York"),
time_EDT = case_when(
hour == "02" & dst_end ~
force_tz(as.POSIXct(paste(date, hour), format = "%m/%d/%Y %H"), tzone = "Etc/GMT+4"),
hour == "02X" ~
force_tz(as.POSIXct(paste(date, "2"), format = "%m/%d/%Y %H"), tzone = "Etc/GMT+5"),
TRUE ~ time),
time_utc = with_tz(time_EDT, tzone = "UTC")) %>%
select(time_utc, time, load_NE)
# Import and merge all CSV files into one data frame
load_NE <- list.files(pattern = "\\.csv$", full.names = TRUE) %>%
lapply(read_csv, show_col_types = FALSE, skip = 5) %>%
bind_rows %>% select(-H)
# Rename columns
names(load_NE) <- c("date","hour","load_NE")
load_NE2 <- load_NE %>% distinct()
setwd(paste0(here(), "/fuel_mix"))
# Import and merge all CSV files into one data frame
fuelmix_NE <- list.files(pattern = "\\.csv$", full.names = TRUE) %>%
lapply(function(file) {
read_csv(file, skip = 6, show_col_types = FALSE,
col_names = c("data_type", "date", "time", "fuel_type",
"fuel_cat", "gen_mw", "marginal")
)}) %>%
bind_rows() %>%
select(-data_type)
View(fuelmix_NE)
fuekmix_NE2 <- fuelmix_NE%>% distinct()
rm(list = ls())
library(dplyr)
library(readr)
library(tidyr)
library(lubridate)
library(here)
setwd(paste0(here(), "/load"))
# Import and merge all CSV files into one data frame
load_NE <- list.files(pattern = "\\.csv$", full.names = TRUE) %>%
lapply(read_csv, show_col_types = FALSE, skip = 5) %>%
bind_rows %>% select(-H)
# Rename columns
names(load_NE) <- c("date","hour","load_NE")
# Remove 2 duplicated entries in the raw data
load_NE2 <- load_NE %>% distinct()
# Remove 2 duplicated entries in the raw data
load_NE <- load_NE %>% distinct()
source("C:/Users/atyho/Dropbox/eletricity_data/NE/NE_data_process.R")
#### Save the dataframes as RData files ####
save(load_NE, file = "../load_NE.RData")
save(fuelmix_NE, file = "../fuelmix_NE.RData")
save(ISONE, file = "../ISONE.RData")
View(ISONE)
